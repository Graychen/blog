<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Graychen的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="这片海域最自由的人才是海贼王,我是要成为海贼王的男人。">
<meta property="og:type" content="website">
<meta property="og:title" content="Graychen的博客">
<meta property="og:url" content="http://graychen.git.io/index.html">
<meta property="og:site_name" content="Graychen的博客">
<meta property="og:description" content="这片海域最自由的人才是海贼王,我是要成为海贼王的男人。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Graychen的博客">
<meta name="twitter:description" content="这片海域最自由的人才是海贼王,我是要成为海贼王的男人。">
  
    <link rel="alternative" href="/atom.xml" title="Graychen的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/assets/blogImg/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Graychen</a></h1>
		</hgroup>

		
		<p class="header-subtitle">这个世界需要更多的英雄</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/categories/随笔">随笔</a></li>
				        
							<li><a href="/categories/技术">技术文章</a></li>
				        
							<li><a href="/categories/错误日志">错误日志</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Graychen" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/5508881293/home?topnav=1&wvr=6" title="weibo">weibo</a>
					        
								<a class="twitter" target="_blank" href="https://twitter.com/huashendung" title="twitter">twitter</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/devops/" style="font-size: 13.33px;">devops</a> <a href="/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/tags/linux基础/" style="font-size: 13.33px;">linux基础</a> <a href="/tags/php/" style="font-size: 20px;">php</a> <a href="/tags/php-php扩展-c/" style="font-size: 16.67px;">php php扩展 c</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/技术/" style="font-size: 10px;">技术</a> <a href="/tags/技术-php/" style="font-size: 13.33px;">技术 php</a> <a href="/tags/编辑器/" style="font-size: 13.33px;">编辑器</a> <a href="/tags/错误日志/" style="font-size: 10px;">错误日志</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Graychen</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="/assets/blogImg/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Graychen</h1>
			</hgroup>
			
			<p class="header-subtitle">这个世界需要更多的英雄</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/categories/随笔">随笔</a></li>
		        
					<li><a href="/categories/技术">技术文章</a></li>
		        
					<li><a href="/categories/错误日志">错误日志</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Graychen" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/5508881293/home?topnav=1&wvr=6" title="weibo">weibo</a>
			        
						<a class="twitter" target="_blank" href="https://twitter.com/huashendung" title="twitter">twitter</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-利用gitlab进行持续部署" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/02/12/利用gitlab进行持续部署/" class="article-date">
  	<time datetime="2018-02-12T15:55:00.000Z" itemprop="datePublished">2018-02-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/12/利用gitlab进行持续部署/">利用gitlab进行持续部署</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="GitLab-CI使用Docker进行持续部署"><a href="#GitLab-CI使用Docker进行持续部署" class="headerlink" title="GitLab-CI使用Docker进行持续部署"></a>GitLab-CI使用Docker进行持续部署</h2><p>Docker镜像通过私有仓库进行发布(如阿里云), 发布命令为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker login -u username -p password registry.demo.com</div><div class="line">docker build -t registry.demo.com/repos/$CI_PROJECT_NAME:latest .</div><div class="line">docker push registry.demo.com/repos/$CI_PROJECT_NAME:latest</div></pre></td></tr></table></figure></p>
<p>其中 <code>username</code>是用户名, <code>password</code>是密码, registry.demo.com是私有镜像库地址,<br><code>$CI_PROJECT_NAME</code> 是GitLab-CI内置变量, 会自动替换为项目的名称, 这里也可以直接写死, 如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker build -t registry.demo.com/repos/image-name:latest .</div></pre></td></tr></table></figure></p>
<p><code>image-name</code>, 就是要构建的镜像名称, <code>latest</code>是TAG标签, <code>repos</code>是仓库的空间名称</p>
<p>在下面的例子中, 首先通过composer安装依赖库, 然后通过artifacts传递给构建任务, 构建完镜像将镜像发布到私有库, 部署时通过拉取最新的镜像库, 进行部署<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/devops/">devops</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2018/02/12/利用gitlab进行持续部署/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-gitlab-ci由浅入深" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/02/11/gitlab-ci由浅入深/" class="article-date">
  	<time datetime="2018-02-11T14:57:07.000Z" itemprop="datePublished">2018-02-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/11/gitlab-ci由浅入深/">gitlab-ci由浅入深</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>持续集成（CI）和 持续交付(CD) 是一种流行的软件开发实践，每次提交都通过自动化的构建（测试、编译、发布）来验证，从而尽早的发现错误。</p>
<p>持续集成实现了DevOps, 使开发人员和运维人员从繁琐的工作中解放出来。另外，这种形式极大地提高了开发者的开发效率和开发质量。 持续集成有多种工具，如Jenkins. GitLab内置了GitLab-CI，通过配置一段YAML脚本来实现持续集成.</p>
<h1 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h1><h2 id="持续集成可以实现的功能"><a href="#持续集成可以实现的功能" class="headerlink" title="持续集成可以实现的功能:"></a>持续集成可以实现的功能:</h2><ul>
<li>代码审核: 自动化代码规范审查, 甚至代码质量检查</li>
<li>自动化测试: 单元测试, 功能测试和验收测试</li>
<li>编译发布: 将源代码编译成可执行程序, 并将程序上传到托管发布平台实现自动发布</li>
<li>构建部署: 通过构建Docker镜像, 或登录远程服务器执行相关部署命令和脚本, 实现自动化部署<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2></li>
</ul>
<p>GitLab-CI 检测每次代码变动, 通过.gitlab-ci.yml脚本执行构建命令, 将命令发布到GitLab-Runners(运行机)上, 进而执行命令.<br>GitLab-Runners 基于Docker执行持续集成的每项任务, 这样就解决了环境依赖问题.<br>GitLab-Runners把实时将执行结果输出到GitLab网页上, 任务执行完后, 通过徽章标记和邮箱告知执行结果.<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a  href="/2018/02/11/gitlab-ci由浅入深/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-git使用规范" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/02/11/git使用规范/" class="article-date">
  	<time datetime="2018-02-11T14:30:54.000Z" itemprop="datePublished">2018-02-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/11/git使用规范/">git使用规范</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git工作流程"><a href="#Git工作流程" class="headerlink" title="Git工作流程"></a>Git工作流程</h1><h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><ul>
<li>master: 用于生产环境部署, 只接受合并请求, 不直接提交</li>
<li>testing: 用于测试环境测试</li>
<li>develop: 用于日常开发主线, 其他分支只能合并到 develop 分支</li>
<li>feature-xxx: 用于增加一个新功能</li>
<li><p>hotfix-xxx: 用于修复一个紧急bug<br>每次开发新功能，都应该新建一个单独的分支</p>
<h2 id="工作流"><a href="#工作流" class="headerlink" title="工作流"></a>工作流</h2></li>
<li><p>如果要贡献代码, 首先应阅读贡献指南, 确认如果贡献代码</p>
</li>
<li>Fork对应的项目, 然后基于develop分支, 新建一个分支, 在这个分支上进行开发</li>
<li>开发时应遵守相应的编码规范和Git日志规范, 提交日志应当给出完整扼要的提交信息</li>
<li>开发完毕后, 先在本项目库上合并到develop分支, 合并完成之后再PR到原项目库<h2 id="Commit-message-和-Change-log-编写指南"><a href="#Commit-message-和-Change-log-编写指南" class="headerlink" title="Commit message 和 Change log 编写指南"></a>Commit message 和 Change log 编写指南</h2></li>
</ul>
<p>Git 每次提交代码，都要写 Commit message（提交说明），否则就不允许提交 +Commit message 遵从<a href="http://blog.cheenwe.cn/2016-04-18/git-commit-message/" target="_blank" rel="noopener"> Angular 规范</a></p>
<h3 id="安装-Commitizen-来格式化-commit-使其遵循以上规范"><a href="#安装-Commitizen-来格式化-commit-使其遵循以上规范" class="headerlink" title="安装 Commitizen 来格式化 commit , 使其遵循以上规范"></a>安装 Commitizen 来格式化 commit , 使其遵循以上规范</h3><p>首先注意将package.json和node_modules加入.gitignore文件<br>全局安装commitizen: <code>npm install -g commitizen</code><br>在项目根目录初始化package.json: <code>npm init --yes</code><br>项目根目录运行 <code>commitizen init cz-conventional-changelog --save --save-exact</code><br>每次提交代码时, 用 <code>git cz</code> 代替<code>git commit</code><br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术-php/">技术 php</a></li></ul>
	</div>

      

      
        <p class="article-more-link">
          <a  href="/2018/02/11/git使用规范/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-集中式日志管理elk搭建" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/02/10/集中式日志管理elk搭建/" class="article-date">
  	<time datetime="2018-02-10T05:56:26.000Z" itemprop="datePublished">2018-02-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/10/集中式日志管理elk搭建/">集中式日志管理elk搭建</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前段时间，我们组内决定将各个应用的日志都集中管理起来，所以需要一款集中式的日志管理系统，查找了市面上的系统发现elk不错，所以我就研究搭建了elk，下面是我在搭建过程中的一些心得。</p>
<blockquote>
<p>elk:这其实是一套组件的缩写，其中比较核心的是三个组件ELK(Elasticsearch, Logstash, Kibana), 经过这么多年的发展已经是6.0.0版本</p>
<ul>
<li>Elasticsearch 高可用性，实时索引，拓展简单，接口友好</li>
<li>Kibana 提供分析和可视化的 Web 平台，用来查询分析以及生成各种报表</li>
<li>Logstash 是一个具有实时的数据收集引擎，几乎可以收集所有的数据</li>
<li>Beats 轻量型采集器的平台，从边缘机器向 Logstash 和 Elasticsearch 发送数据</li>
<li>X-Pack 是集成了多种便捷功能的单个插件 — security、alerting、monitoring、reporting、graph 探索</li>
</ul>
</blockquote>
<h2 id="elk的初始化"><a href="#elk的初始化" class="headerlink" title="elk的初始化"></a>elk的初始化</h2><p>其实elk既可以在linux的环境安装也可以使用docker形式，我在github上找到一个已经配置好的docker环境的<a href="https://github.com/deviantony/docker-elk" target="_blank" rel="noopener">docker-elk</a><br>使用git clone git@github.com:deviantony/docker-elk.git后执行docker-compose up,然后我们访问<a href="http://localhost:5601,以下是它的端口" target="_blank" rel="noopener">http://localhost:5601,以下是它的端口</a></p>
<ul>
<li>5000: Logstash TCP input.</li>
<li>9200: Elasticsearch HTTP</li>
<li>9300: Elasticsearch TCP transport</li>
<li>5601: Kibana
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux基础/">linux基础</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2018/02/10/集中式日志管理elk搭建/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-集群的nginx配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/15/集群的nginx配置/" class="article-date">
  	<time datetime="2018-01-14T16:01:54.000Z" itemprop="datePublished">2018-01-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/15/集群的nginx配置/">集群的nginx配置</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这篇文章是nginx的进阶篇，我会详细梳理集群的nginx配置,包括nginx服务器的反向代理，负载均衡,不过这些都是要先建立后端服务器组。<br>按照上篇的惯例，我们先亮出集群nginx配置文件</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line">user nobody nobody;</div><div class="line">worker_process 2;</div><div class="line">error_log /usr/local/webserver/nginx/logs/nginx_error.log crit;</div><div class="line">pid /usr/local/webserver/nginx/nginx/pid;</div><div class="line">worker_rlimit_nofile 65535;</div><div class="line">events</div><div class="line">&#123;</div><div class="line">        use epoll;</div><div class="line">        woreker_connections 65535;</div><div class="line">&#125;</div><div class="line">http</div><div class="line">&#123;</div><div class="line">        include mime.types;</div><div class="line">        default_type application/octet-stream;</div><div class="line">        charset utf-8;</div><div class="line">        sendfile on;</div><div class="line">        tcp_nopush on;</div><div class="line">        keepalive_timeout 60;</div><div class="line">        tcp_nodelay on;</div><div class="line">        client_body_buffer_size 512k;</div><div class="line">        proxy_connect_timeout 5;</div><div class="line">        proxy_read_timeout 60;</div><div class="line">        proxy_send_timeout 5;</div><div class="line">        proxy_buffer_size 16k;</div><div class="line">        proxy_buffers 4 16k;</div><div class="line">        proxy_busy_buffers_size 128k;</div><div class="line">        proxy_temp_file_write_size 128k;</div><div class="line">        gzip on;</div><div class="line">        gzip_min_length 1k;</div><div class="line">        gzip_buffers 4 16k;</div><div class="line">        gzip_http_version 1.1;</div><div class="line">        gzip_comp_level 2;</div><div class="line">        gzip_types text/plain application/x-javascript text/css application/xml;</div><div class="line">        gzip_vary on;</div><div class="line">#设置Web缓存区名称为cache_one,内存缓存空间大小为200M,1天清理一次缓存，硬盘缓存空间大小为30GB</div><div class="line">        proxy_temp_file_path /data0/proxy_temp_dir;</div><div class="line">        proxy_cache_path /data0/proxy_cache_dir levels=1:2 keys_zone=cache_one:200m</div><div class="line">        inactive=1d max_size=30g;</div><div class="line">        upstream backend &#123;</div><div class="line">                server 192.168.1.3:80 weight=1 max_fails=2 fail_timeout=30s;</div><div class="line">                server 192.168.1.4:80 weight=1 max_fails=2 fail_timeout=30s;</div><div class="line">                server 192.168.1.5:80 weight=1 max_fails=2 fail_timeout=30s;</div><div class="line">        &#125;</div><div class="line">        server</div><div class="line">        &#123;</div><div class="line">                listen 80;</div><div class="line">                server_name myweb;</div><div class="line">                index index.html index.htm;</div><div class="line">                root /data0/htdocs/www;</div><div class="line">                location /</div><div class="line">                &#123;</div><div class="line">                        #如果后端的服务器返回502,504执行超时等错误，将请求转发到另一台服务器。</div><div class="line">                        proxy_next_upstream http_502 http_504 error timeout invalid_header;</div><div class="line">                        proxy_cache cache_one;</div><div class="line">                        #针对不同HTTP状态设置不同的缓存时间</div><div class="line">                        proxy_cache_key $host$uri$is_args$args;</div><div class="line">                        proxy_set_header Host $host;</div><div class="line">                        proxy_set_header X-Forwarded-For $remote_addr;</div><div class="line">                        proxy_pass http://backend_server;</div><div class="line">                        expires 1d;</div><div class="line">                &#125;</div><div class="line">                #配置缓存清楚功能</div><div class="line">                location ~ /purge(/.*)</div><div class="line">                &#123;</div><div class="line">                        allow 127.0.0.1;</div><div class="line">                        allow 192.168.0.0/16;</div><div class="line">                        deny all;                </div><div class="line">                        proxy_cache_purge cache_one $host$1$is_args$args;</div><div class="line">                &#125;</div><div class="line">                #配置数据不缓存</div><div class="line">                location ~ .*\.(php|jpg|cgi)?$</div><div class="line">                &#123;</div><div class="line">                        proxy_set_header Host $host;</div><div class="line">                        proxy_set_header X-Forwarded-For $remote_addr;</div><div class="line">                        proxy_pass http://backend;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2018/01/15/集群的nginx配置/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-nginx配置优化" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/04/nginx配置优化/" class="article-date">
  	<time datetime="2018-01-04T14:52:38.000Z" itemprop="datePublished">2018-01-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/04/nginx配置优化/">nginx配置优化</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近由于刚看完nginx高性能web服务器详解，就想结合自己工作的经历，对nginx的优化配置做一个系统的总结，这篇是初级篇，是单机的nginx优化配置<br>首先我们看一份较简单的nginx.conf配置文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line">#### 全局块开始 ####</div><div class="line">user nobody nobody; #配置允许Nginx服务器的用户和用户组</div><div class="line">worker_processes 3; #配置Nginx进程生成的worker_processes数目</div><div class="line">error_log logs/error_log; #配置Nginx服务器允许对错误日志存放路径</div><div class="line">pid nginx.pid; #配置Nginx服务允许时的错误日志存放路径</div><div class="line">#### 全局块结束 ####</div><div class="line"></div><div class="line">#### event开始 ####</div><div class="line">events &#123;</div><div class="line">        use epoll; #配置事件驱动模型</div><div class="line">        worker_connections 1024; #配置最大连接数</div><div class="line">&#125;</div><div class="line">#### event结束 ####</div><div class="line">#### http块开始 ####</div><div class="line">http &#123;</div><div class="line">        include mime.types; #定义MIME-TYPE</div><div class="line">        default_type application/octet-stream; </div><div class="line">        sendfile on; #配置允许使用sendfile方式传输</div><div class="line">        keepalive_timeout 65; #配置连接超时</div><div class="line">        log_format access.log #配置请求处理日志的分格</div><div class="line">        &apos;$remote_addr-[$time_local]-&quot;$request&quot;-&quot;$http_user_agent&quot;&apos;</div><div class="line"></div><div class="line">        gzip on; #gzip功能设置</div><div class="line">        gzip_min_length 1024; #响应页数据上限</div><div class="line">        gzip_buffers 4 16k; # 缓存空间大小</div><div class="line">        gzip_comp_level 2; # 压缩级别为2</div><div class="line">        gzip_types text/plain application/x-javascript text/css application/xml; #压缩文件类型</div><div class="line">        gzip_vary on #启用压缩标识</div><div class="line">        gzip_disable &quot;MISIE[1-6]&quot;; #ie1-6不开启压缩功能</div><div class="line">        gunzip_static no #检查预压缩文件</div><div class="line">        gzip_static on;</div><div class="line">        gzup_http_version 1.0;</div><div class="line">#### server块开始 ####</div><div class="line">        server &#123; #配置虚拟主机1</div><div class="line">                listen 8081; </div><div class="line">                server_name myServer1; #监听端口和主机名称</div><div class="line">                access_log /myweb/server1/log/access_log; #配置请求处理日志存放路径</div><div class="line">                error_page 404 /404.html; </div><div class="line">                location /server1/location1 &#123; #配置处理/server1/location1 请求的location</div><div class="line">                        root /myweb;</div><div class="line">                        index index.svr1-local.htm;</div><div class="line">                &#125;</div><div class="line">                location /server2/location2 &#123; #配置处理/server2/location2 请求的location</div><div class="line">                        root /myweb;</div><div class="line">                        index index.svr2-local.htm;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">        server &#123; #配置虚拟主机2</div><div class="line">                listen 8082; </div><div class="line">                gzip off; #主机2关闭压缩</div><div class="line">                server_name 192.168.1.3; #监听端口和主机名称</div><div class="line">                access_log /myweb/server2/log/access_log; #配置请求处理日志存放路径</div><div class="line">                error_page 404 /404.html; </div><div class="line">                location /server2/location1 &#123; #配置处理/server2/location1 请求的location</div><div class="line">                        root /myweb;</div><div class="line">                        index index.svr2-local.htm;</div><div class="line">                &#125;</div><div class="line">                location /server2/loc2 &#123; #配置处理/server2/location2 请求的location</div><div class="line">                        root /myweb;</div><div class="line">                        index index.svr2-local.htm;</div><div class="line">                &#125;</div><div class="line">                location = /404.html &#123;</div><div class="line">                        root /myweb/;</div><div class="line">                        index 404.html;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">#### server块结束 ####</div><div class="line">&#125;</div><div class="line">#### http块结束 ####</div></pre></td></tr></table></figure></p>
<p>通过这个我们认识了nginx配置的基本组成:</p>
<ul>
<li>全局块：配置整体允许的配置指令，包括用户组，worker process数，Nginx进程,日志存放路径，配置文件引入</li>
<li>event块：与用户的网络连接,事件模型的选择，worker process下的网络序列化,是否允许同事接受多个网络连接，每个worker process最大支持连接数</li>
<li>http块：代理,缓存,日志定义,第三方模块的配置</li>
<li>server块：虚拟主机</li>
<li>location块: 基于请求对除虚拟主机之外的字符串进行匹配,包括地址定向，数据缓存，应答控制
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2018/01/04/nginx配置优化/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-websocket结合swoole进行wss访问" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/03/websocket结合swoole进行wss访问/" class="article-date">
  	<time datetime="2018-01-03T13:32:26.000Z" itemprop="datePublished">2018-01-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/03/websocket结合swoole进行wss访问/">swoole利用websocket进行wss访问</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近利用swoole的websocket对扫码登录进行重构，原本是利用长轮循监听用户的的扫码，但对服务器的资源消耗太大，所以改用websocket节省带宽和服务器资源。</p>
<blockquote>
<p><strong>websocket</strong>: 一种在单个 TCP 连接上进行全双工通讯的协议。使得客户端和服务器之间的数据交换变得更加简单，允许服务端主动向客户端推送数据。在WebSocket API 中，浏览器和服务器只需要完成一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输。</p>
</blockquote>
<h2 id="在docker中搭建swoole的环境"><a href="#在docker中搭建swoole的环境" class="headerlink" title="在docker中搭建swoole的环境"></a>在docker中搭建swoole的环境</h2><ul>
<li><p>先建立build_swoole.sh这样的安装shell文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">apk add git autoconf build-base linux-headers libaio-dev pcre-dev openssl-dev icu-dev</div><div class="line">ln -s /usr/bin/php-config7 /usr/bin/php-config</div><div class="line">ln -s /usr/bin/phpize7 /usr/bin/phpize</div><div class="line">cd /root/</div><div class="line">git clone https://github.com/swoole/swoole-src.git</div><div class="line">cd /root/swoole-src</div><div class="line">phpize</div><div class="line">./configure --enable-openssl</div><div class="line">make &amp;&amp; make install</div><div class="line">apk del libaio-dev php-dev git autoconf build-base linux-headers pcre-dev</div><div class="line">apk del --no-cache php-dev</div><div class="line">apk del --no-cache git</div><div class="line">apk del --no-cache build-base</div><div class="line">apk del --no-cache make</div><div class="line">apk del --no-cache openssl-dev</div><div class="line">apk del --no-cache linux-headers</div><div class="line">apk del --no-cache libaio-dev</div><div class="line">apk del --no-cache pcre-dev</div><div class="line">apk del --no-cache autoconf</div><div class="line">apk del --no-cache .persistent-deps</div><div class="line">apk del --no-cache libmcrypt-dev</div><div class="line">apk del --no-cache g++</div><div class="line"># apk del --no-cache icu-dev</div><div class="line">apk info</div><div class="line">php -m</div><div class="line">rm -rf /var/cache/apk/*</div><div class="line">rm -rf /root/swoole-src/</div><div class="line">rm -rf /tmp/*</div></pre></td></tr></table></figure>
</li>
<li><p>然后在Dockerfile中使用我们的安装脚本,编译安装成功后，修改php.ini加入<code>extension=swoole.so</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">FROM zacksleo/php:7.1-alpine-fpm-supervisor</div><div class="line">COPY build_swoole.sh /root</div><div class="line">RUN sh /root/build_swoole.sh</div></pre></td></tr></table></figure>
</li>
<li><p>接着<code>docker-composer build 创建对应的docker镜像</code>，并且运行<code>docker-composer up</code>，在进入对应的docker容器中<code>docker exec 你的镜像名</code>,执行命令<code>php -m</code>,如果出现swoole，那我们的swoole扩展就安装好了</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
        <p class="article-more-link">
          <a  href="/2018/01/03/websocket结合swoole进行wss访问/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-使用Prometheus-Grafana监控" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/10/使用Prometheus-Grafana监控/" class="article-date">
  	<time datetime="2017-12-10T10:09:37.000Z" itemprop="datePublished">2017-12-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/10/使用Prometheus-Grafana监控/">使用Prometheus+Grafana监控</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Prometheus（普罗米修斯）是一套开源的监控&amp;报警&amp;时间序列数据库的组合，起始是由SoundCloud公司开发的。随着发展，越来越多公司和组织接受采用Prometheus，社会也十分活跃，他们便将它独立成开源项目，并且有公司来运作。Google SRE的书内也曾提到跟他们BorgMon监控系统相似的实现是Prometheus。现在最常见的Kubernetes容器管理系统中，通常会搭配Prometheus进行监控。<br>Prometheus基本原理是通过HTTP协议周期性抓取被监控组件的状态，这样做的好处是任意组件只要提供HTTP接口就可以接入监控系统，不需要任何SDK或者其他的集成过程。这样做非常适合虚拟化环境比如VM或者Docker 。<br>Prometheus应该是为数不多的适合Docker、Mesos、Kubernetes环境的监控系统之一。</p>
<p>输出被监控组件信息的HTTP接口被叫做exporter 。目前互联网公司常用的组件大部分都有exporter可以直接使用，比如Varnish、Haproxy、Nginx、MySQL、Linux 系统信息 (包括磁盘、内存、CPU、网络等等)，具体支持的源看：<a href="https://github.com/prometheus。" target="_blank" rel="noopener">https://github.com/prometheus。</a></p>
<p>与其他监控系统相比，Prometheus的主要特点是：</p>
<ul>
<li>一个多维数据模型（时间序列由指标名称定义和设置键/值尺寸）。</li>
<li>非常高效的存储，平均一个采样数据占~3.5bytes左右，320万的时间序列，每30秒采样，保持60天，消耗磁盘大概228G。</li>
<li>一种灵活的查询语言。</li>
<li>不依赖分布式存储，单个服务器节点。</li>
<li>时间集合通过HTTP上的PULL模型进行。</li>
<li>通过中间网关支持推送时间。</li>
<li>通过服务发现或静态配置发现目标。</li>
<li>多种模式的图形和仪表板支持。</li>
</ul>
<h2 id="Prometheus架构概览"><a href="#Prometheus架构概览" class="headerlink" title="Prometheus架构概览"></a>Prometheus架构概览</h2><p>该图说明了普罗米修斯（Prometheus）及其一些生态系统组件的整体架构：<br><img src="http://ww1.sinaimg.cn/large/0060OHG5gy1fm4pg7j25ej30l60dw40p.jpg" alt="Prometheus架构概览"><br>它的服务过程是这样的Prometheus daemon负责定时去目标上抓取metrics(指标) 数据，每个抓取目标需要暴露一个http服务的接口给它定时抓取。</p>
<ul>
<li><p>Prometheus：支持通过配置文件、文本文件、zookeeper、Consul、DNS SRV lookup等方式指定抓取目标。支持很多方式的图表可视化，例如十分精美的Grafana，自带的Promdash，以及自身提供的模版引擎等等，还提供HTTP API的查询方式，自定义所需要的输出。</p>
</li>
<li><p>Alertmanager：是独立于Prometheus的一个组件，可以支持Prometheus的查询语句，提供十分灵活的报警方式。</p>
</li>
<li><p>PushGateway：这个组件是支持Client主动推送metrics到PushGateway，而Prometheus只是定时去Gateway上抓取数据。</p>
</li>
</ul>
<h2 id="Prometheus的数据模型"><a href="#Prometheus的数据模型" class="headerlink" title="Prometheus的数据模型"></a>Prometheus的数据模型</h2><p>Prometheus从根本上所有的存储都是按时间序列去实现的，相同的metrics(指标名称) 和label(一个或多个标签) 组成一条时间序列，不同的label表示不同的时间序列。为了支持一些查询，有时还会临时产生一些时间序列存储。<br>metrics name&amp;label指标名称和标签</p>
<p>每条时间序列是由唯一的”指标名称”和一组”标签（key=value）”的形式组成。</p>
<h3 id="指标名称："><a href="#指标名称：" class="headerlink" title="指标名称："></a>指标名称：</h3><p>一般是给监测对像起一名字，例如http_requests<em>total这样，它有一些命名规则，可以包字母数字</em>之类的的。通常是以应用名称开头<em>监测对像</em>数值类型_单位这样。例如：push_total、userlogin_mysql_duration_seconds、app_memory_usage_bytes。</p>
<h3 id="标签："><a href="#标签：" class="headerlink" title="标签："></a>标签：</h3><p>就是对一条时间序列不同维度的识别了，例如一个http请求用的是POST还是GET，它的endpoint是什么，这时候就要用标签去标记了。最终形成的标识便是这样了：http_requests_total{method=”POST”,endpoint=”/api/tracks”}。</p>
<p>记住，针对http_requests_total这个metrics name无论是增加标签还是删除标签都会形成一条新的时间序列。</p>
<p>查询语句就可以跟据上面标签的组合来查询聚合结果了。</p>
<p>如果以传统数据库的理解来看这条语句，则可以考虑http_requests_total是表名，标签是字段，而timestamp是主键，还有一个float64字段是值了。（Prometheus里面所有值都是按float64存储）。</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/devops/">devops</a></li></ul>
	</div>

      

      
        <p class="article-more-link">
          <a  href="/2017/12/10/使用Prometheus-Grafana监控/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-github自动化测试" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/27/github自动化测试/" class="article-date">
  	<time datetime="2017-09-27T14:39:54.000Z" itemprop="datePublished">2017-09-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/27/github自动化测试/">github上composer自动化测试</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前段时间我们组对项目进行重构，将多个项目中例如log，app的更新这些重复的内容抽出来做了composer包，为了保证这些composer包的代码质量，<br>使用了github上的一些工具。下面我以自己的一个利用经纬度查询地理位置的composer包geolocation[<a href="https://github.com/Graychen/geolocation/tree/master/tests]为例来详细描述下我们的做法。" target="_blank" rel="noopener">https://github.com/Graychen/geolocation/tree/master/tests]为例来详细描述下我们的做法。</a></p>
<h2 id="Style-CI-php格式检查"><a href="#Style-CI-php格式检查" class="headerlink" title="Style CI(php格式检查)"></a>Style CI(php格式检查)</h2><p>在项目根目录，新建.styleci.yml 配置文件，并编写配置内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">preset: psr2</div></pre></td></tr></table></figure></p>
<p>打开 <a href="https://styleci.io/" target="_blank" rel="noopener">https://styleci.io/</a> ，使用Gitlab账号登录，找到对应的项目，点击右侧的 ENABLE STYLECI 启用按钮，即可使用，<br>每次提交代码，都会看到检测结果<br>如果没有找到自己的项目，打开 <a href="https://styleci.io/account#repos" target="_blank" rel="noopener">https://styleci.io/account#repos</a> 点击 Sync With GitHub 同步，就会看到</p>
<h2 id="Travis-CI-自动化测试"><a href="#Travis-CI-自动化测试" class="headerlink" title="Travis-CI(自动化测试)"></a>Travis-CI(自动化测试)</h2><h3 id="配置单元测试"><a href="#配置单元测试" class="headerlink" title="配置单元测试"></a>配置单元测试</h3><p>1先引入phpunit单元测试包,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer require --dev phpunit/phpunit ^6.2</div></pre></td></tr></table></figure></p>
<p>2编写配置文件phpunit.xml.dist,放到根根根目录<br>白名单是你要测试的目录文件，用于生成代码覆盖率<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;phpunit bootstrap=&quot;./tests/bootstrap.php&quot;</div><div class="line">         colors=&quot;true&quot;</div><div class="line">         verbose=&quot;true&quot;</div><div class="line">         convertErrorsToExceptions=&quot;true&quot;</div><div class="line">         convertNoticesToExceptions=&quot;true&quot;</div><div class="line">         convertWarningsToExceptions=&quot;true&quot;</div><div class="line">         processIsolation=&quot;false&quot;</div><div class="line">         stopOnFailure=&quot;false&quot;&gt;</div><div class="line">    &lt;testsuites&gt;</div><div class="line">        &lt;testsuite name=&quot;Test Suite&quot;&gt;</div><div class="line">            &lt;directory&gt;./tests&lt;/directory&gt;</div><div class="line">        &lt;/testsuite&gt;</div><div class="line">    &lt;/testsuites&gt;</div><div class="line">    &lt;filter&gt;</div><div class="line">        &lt;whitelist&gt;</div><div class="line">            &lt;directory suffix=&quot;.php&quot;&gt;./src&lt;/directory&gt;</div><div class="line">        &lt;/whitelist&gt;</div><div class="line">    &lt;/filter&gt;</div><div class="line">&lt;/phpunit&gt;</div></pre></td></tr></table></figure></p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术-php/">技术 php</a></li></ul>
	</div>

      

      
        <p class="article-more-link">
          <a  href="/2017/09/27/github自动化测试/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-yii2-queue队列的使用说明" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/28/yii2-queue队列的使用说明/" class="article-date">
  	<time datetime="2017-07-28T04:15:36.000Z" itemprop="datePublished">2017-07-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/28/yii2-queue队列的使用说明/">yii2-queue队列的使用说明</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>yii2-queue是一个yii官方推出的队列扩展库，主要通过队列异步运行任务，它支持基于DB，Redis，RabbitMQ，Beanstalk和Gearman的队列。</p>
<h2 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h2><ul>
<li><a href="https://github.com/yiisoft/yii2-queue" target="_blank" rel="noopener">github</a></li>
<li><a href="https://packagist.org/packages/yiisoft/yii2-queue" target="_blank" rel="noopener">packaglist</a></li>
</ul>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编辑器/">编辑器</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2017/07/28/yii2-queue队列的使用说明/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Graychen
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: undefined,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: undefined,
		root: /
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>